# whatsMyIPv4.py
# author: Diego Magdaleno
# Send a request to the "whatismyip" website to get the computer's
# public IPv4 address.
# Python 3.7
# Windows/MacOS/Linux


import requests
from bs4 import BeautifulSoup as bsoup


def main():
	# Initialize the url of the website and send a get request. Record
	# the response.
	url = "https://www.whatismyip.com/"
	response = requests.get(url)

	# Parse the response to get the IPv4 address and print it out to
	# console. If an exception is made, then that means the content of
	# the request is not what was expected. Print that out to the user
	# and exit the program.
	soup = bsoup(response.content, features="lxml")
	try:
		ipText = soup.findAll("span", {"class": "cf-footer-item"})[1]
		ipAddress = ipText.text.lstrip("Your IP: ").rstrip(" \n")
		print(ipAddress)
	except Exception as e:
		print("There was an error retrieving the address.")
		exit(1)

	# Close the program.
	exit(0)


if __name__ == '__main__':
	main()
